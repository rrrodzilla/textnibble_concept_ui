#:kivy 2.0.0
#:import RoundedRectangle kivy.graphics
#:import C kivy.utils.get_color_from_hex
#:import LiveOrdersScreen liveordersscreen
#:include liveordersscreen.kv
#:import PreviousOrdersScreen previousordersscreen
#:include previousordersscreen.kv
#:import OrderDetailScreen orderdetailscreen
#:include orderdetailscreen.kv
#:import ActiveOrdersScreen activeordersscreen
#:include activeordersscreen.kv
#:import WorkingOrdersScreen workingordersscreen
#:include workingordersscreen.kv
#:import AlertButton alertbutton
#:include alertbutton.kv


<MainScreen>:
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            orientation: 'horizontal'
            size_hint: 1, None
            height: 96
            padding: 96, 0, 96, 0
            StackLayout:
                Image:
                    source: './images/logo-horizontal-reversed@3x.png'
                    color: C('#A1A1AA')
                    size_hint: .15, 1
                    allow_stretch: True
                AlertButton:
                    size_hint: .15, 1
                    on_press: content_manager.current = 'active_orders'
                    button_text: '[i]Action Needed[/i]'
                    alert_text: f'{active_orders.order_total}'
                AlertButton:
                    size_hint: .15, 1
                    on_press: content_manager.current = 'working_orders'
                    button_text: 'Working Orders'
                    alert_text: f'{working_orders.order_total}'
            AnchorLayout:
                anchor_y: 'center'
                anchor_x: 'center'
                size_hint: .1, 1
                Button:
                    canvas.before:
                        Color:
                            rgb: C('#D4D4D8')
                        Ellipse:
                            size: self.size
                            pos: self.pos
                    background_color: 0, 0, 0, 0
                    markup: True
                    text: f'[font=Icons][size=24]{chr(60558)}[/size][/font]'
                    color: C('#71717A')
                    size_hint_x: None
                    size_hint_y: None
                    height: 48
                    width: 48
                    on_press: root.manager.current = 'login'
        ScreenManager:
            id: content_manager
#            LiveOrdersScreen:
#                id: live_orders
#                screen_manager: content_manager
            ActiveOrdersScreen:
                id: active_orders
                screen_manager: content_manager
            WorkingOrdersScreen:
                id: working_orders
                screen_manager: content_manager
            PreviousOrdersScreen:
                id: previous_orders
            OrderDetailScreen:
                id: order_detail
